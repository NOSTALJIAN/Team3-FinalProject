
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="description" content="A well made and handcrafted Bootstrap 5 template">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon.png">
    <meta name="author" content="Holger Koenemann">
    <meta name="generator" content="Eleventy v2.0.0">
    <meta name="HandheldFriendly" content="true">
    <title>List Design Test</title>
    <link rel="stylesheet" href="../resources/static/css/theme.min.css" />
    <link rel="stylesheet" href="../resources/static/css/board.css" />
      <!-- <link rel="stylesheet" href="../resources/static/css/board.css" /> -->
  
     <style>
  
  /* inter-300 - latin */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 300;
    font-display: swap;
    src: local(''),
         url('fonts/inter-v12-latin-300.woff2') format('woff2'), /* Chrome 26+, Opera 23+, Firefox 39+ */
         url('fonts/inter-v12-latin-300.woff') format('woff'); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
  }
  
  /* inter-400 - latin */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local(''),
         url('fonts/inter-v12-latin-regular.woff2') format('woff2'), /* Chrome 26+, Opera 23+, Firefox 39+ */
         url('fonts/inter-v12-latin-regular.woff') format('woff'); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
  }
  
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 500;
    font-display: swap;
    src: local(''),
         url('fonts/inter-v12-latin-500.woff2') format('woff2'), /* Chrome 26+, Opera 23+, Firefox 39+ */
         url('fonts/inter-v12-latin-500.woff') format('woff'); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
  }
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: local(''),
         url('fonts/inter-v12-latin-700.woff2') format('woff2'), /* Chrome 26+, Opera 23+, Firefox 39+ */
         url('fonts/inter-v12-latin-700.woff') format('woff'); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
  }
  
  </style>
   
</head>

<body style="height: 2000px;">
    <!--Top-->
    <nav id="navScroll" class="navbar navbar-dark bg-black fixed-top px-vw-5" tabindex="0" style="height: 65px; padding-top: 8px;">
        <div class="container">
          <a class="navbar-brand pe-md-4 fs-4 col-12 col-md-auto text-center" href="index.html">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-stack" viewBox="0 0 16 16">
          <path d="m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"/>
          <path d="m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"/>
        </svg>
        <span class="ms-md-1 mt-1 fw-bolder me-md-5">Klar</span>
      </a>
      
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0 list-group list-group-horizontal">
            <li class="nav-item">
        <a class="nav-link fs-5" href="index.html" aria-label="Homepage">
          Home
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link fs-5" href="content.html" aria-label="A sample content page">
          Content
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link fs-5" href="system.html" aria-label="A system message page">
          System
        </a>
      </li>
      
          </ul>
            <a href="https://templatedeck.com/klar-html-template.html" aria-label="Download this template" class="btn btn-outline-light">
              <small>Download Template</small>
            </a>
      </div>
      </nav>
      <!--Top-->
      <!--Main-->
        <div class="container" style="margin: 40px; padding-bottom: 300px;">
          <div class="row" style="justify-content: space-evenly">
            <!-- =================== main =================== -->
            <div class="">
              <span style="display: flex; margin-left: 400px;">
                <h3 class="detail-title">${b.bTitle}</h3>
                <div class="detail-btn">
                <button onclick="location.href='/board/list'" class="btn-hover color-8 ms-3 col-2" style="width: 100px" type="button">목록</button>
                <button onclick="location.href='/board/list'" class="btn-hover color-9 ms-3 col-2" style="width: 100px" type="button">신청</button>
                
                <!-- 본인만 수정 가능 -->
                <c:if test="${b.uid eq sessionUid}">
                  <button onclick="location.href='/board/update?bid=${b.bid}'" class="btn-hover color-8 ms-3 col-2" style="width: 100px" type="button" value="수정">수정</button>
                </c:if>
                <c:if test="${b.uid ne sessionUid}">
                  <!--   <a href="#" class="ms-3 disabled-link"><i class="far fa-edit"></i> 수정</a>   -->
                </c:if>
                
                <!-- 본인 또는 관리자만 삭제 가능 -->
                <c:if test="${b.uid eq sessionUid || b.uid eq 'admin'}">
                  <button onclick="location.href='/board/delete?bid=${b.bid}'" class="btn-hover color-8 ms-3 col-2" style="width: 100px" type="button" value="삭제">삭제</button>
                </c:if>
                <c:if test="${b.uid ne sessionUid}">
                  <!--  <a href="#" class="ms-3 disabled-link"><i class="fas fa-trash-alt"></i> 삭제</a> -->
                </c:if>
                </div>
              </span>
            </div>
            <div>
              <div class="detailbox">
                <div class="board-view-content">
                ${fn:replace(b.bContent, newline, '<br>')}
              </div>
              </div>
              <div class="space"></div>
              <!-- 게시글 정보 -->	
              <div class="detail-content">
                  <div>
                      <p class="board-view-cnt" style="margin-left: 50px;">
                        <span>조회${b.bViewCount}</span> <span>댓글${b.bReplyCount}</span> <span>작성자 ${b.uid}</span> 
                      </p>
                    </div>
                <table class="board-view-infomation " style="margin-left: 300px; margin-top:-14px; color: black;">
                  <tr>
                    <th>운동 종목</th>
                    <td>${b.bCategory}</td>
                  </tr>
                  <tr>
                    <th>운동 장소</th>
                    <td>${b.bLocation}</td>
                  </tr>
                  <tr>
                    <th>운동 일자</th>
                    <td> ${fn:replace(b.bAppointment, 'T', ' ')}</td>
                  </tr>
                  <tr>
                    <th>운동 인원</th>
                    <td>${b.bUserCount}명</td>
                  </tr>
                  <tr>
                    <th>작성 일자</th>
                    <td>${fn:replace(b.bRegTime, 'T', ' ')}</td>
                  </tr>
                </table>
              </div>
              <div class="col-12" style="margin-top: 50px;"></div>
              <div class="board-view-map" id="map"></div>
                
                
              <!-- 댓글 -->
              <div class="col-12"></div>
              <div class="col-12" style="margin-top: 150px; margin-left: 200px;">
                <c:forEach var="reply" items="${replyList}" varStatus="loop">
                  <c:if test="${reply.rIsMine eq 0}">
                    <div class="d-flex flex-row mt-1">
                      <div class="card bg-light text-dark w-75">
                        <div class="card-body" id="reply${loop.count}">		
                          ${reply.uid}&nbsp;&nbsp;${fn:replace(reply.rRegTime,'T',' ')}
                          <c:if test="${reply.uid eq sessionUid}">
                            <button onclick="replyUpdate('block', '${loop.count}')" style="float: right">수정</button>
                            <button onclick="deleteConfirm('${b.bid}', '${reply.rid}')" style="float: right">삭제</button>
                          </c:if><br>    <!-- uname, regTime-->
                          ${fn:replace(reply.rContent, newline, '<br>')}  <!-- content -->
                        </div>
                        <!-- 댓글 수정기능 추가  -->
                        <form class="form-inline d-none" action="/board/replyUpdate" id="replyUpdate${loop.count}" method="post">
                          <input type="hidden" name="bid" value="${b.bid}">     <!-- bid -->
                          <input type="hidden" name="uid" value="${b.uid}">     <!-- uid -->
                          <input type="hidden" name="rid" value="${reply.rid}">     <!-- rid -->
                          <table class="table table-borderless mt-2">
                            <tr class="d-flex">
                              <td class="col-2 text-end">
                                <label for="rContent">댓글수정</label>
                              </td>
                              <td class="col-6">
                                <textarea class="form-control" id="rContent" name="rContent" rows="3">${fn:replace(reply.rContent, newline, '<br>')}</textarea>
                              </td>
                              <td class="col-4">
                                <button type="submit" class="btn btn-primary">수정</button>
                                <button onclick="replyUpdate('none', '${loop.count}')" class="btn btn-primary">취소</button>
                              </td>
                            </tr>
                          </table>
                        </form>
                      </div>
                    </div>
                  </c:if>
                  <c:if test="${reply.rIsMine eq 1}">
                    <div class="d-flex flex-row-reverse mt-1">
                      <div class="card w-75">
                        <div class="card-body text-end" id="reply${loop.count}">		
                          ${reply.uid}&nbsp;&nbsp;${fn:replace(reply.rRegTime,'T',' ')}
                          <c:if test="${reply.uid eq sessionUid}">
                            <button onclick="replyUpdate('block', '${loop.count}')" style="float: right">수정</button>
                            <button onclick="deleteConfirm('${b.bid}', '${reply.rid}')" style="float: right">삭제</button>
                          </c:if><br>    <!-- uname, regTime-->
                          ${fn:replace(reply.rContent, newline, '<br>')}  <!-- content -->
                        </div>
                        <!-- 댓글 수정기능 추가  -->
                        <form class="form-inline d-none" action="/board/replyUpdate" id="replyUpdate${loop.count}" method="post">
                          <input type="hidden" name="bid" value="${b.bid}">     <!-- bid -->
                          <input type="hidden" name="uid" value="${b.uid}">     <!-- uid -->
                          <input type="hidden" name="rid" value="${reply.rid}">     <!-- rid -->
                          <table class="table table-borderless mt-2">
                            <tr class="d-flex">
                              <td class="col-1 text-end">
                                <label for="rContent">댓글수정</label>
                              </td>
                              <td class="col-9">
                                <textarea class="form-control" id="rContent" name="rContent" rows="3">${fn:replace(reply.rContent, newline, '<br>')}</textarea>
                              </td>
                              <td class="col-2">
                                <button type="submit" class="btn btn-primary">수정</button>
                                <button onclick="replyUpdate('none', '${loop.count}')" class="btn btn-primary">취소</button>
                              </td>
                            </tr>
                          </table>
                        </form>
                      </div>
                    </div>
                  </c:if>
                </c:forEach>
                <c:if test="${not empty sessionUid}">
                  <form class="form-inline" action="/board/reply" method="post">
                    <input type="hidden" name="bid" value="${b.bid}">     <!-- bid -->
                    <input type="hidden" name="uid" value="${b.uid}">     <!-- uid -->
                    <table class="table table-borderless mt-2">
                      <tr class="d-flex">
                        <td class="col-1 text-end">
                          <label for="rContent">댓글</label>
                        </td>
                        <td class="col-6">
                          <textarea class="form-control" id="rContent" name="rContent" rows="3"></textarea>
                        </td>
                        <td class="col-2">
                          <button type="submit" class="btn-hover color-8">제출</button>
                        </td>
                      </tr>
                    </table>
                  </form>
                </c:if>
              </div>
            </div>
          </div>
        </div>
   
<script>
  var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
      mapOption = {
          center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
          level: 3 // 지도의 확대 레벨
      };  

  // 지도를 생성합니다    
  var map = new kakao.maps.Map(mapContainer, mapOption); 

  // 주소-좌표 변환 객체를 생성합니다
  var geocoder = new kakao.maps.services.Geocoder();

  // 주소로 좌표를 검색합니다
  var bAddr = '${b.bAddr}';
  geocoder.addressSearch(bAddr, function(result, status) {

      // 정상적으로 검색이 완료됐으면 
       if (status === kakao.maps.services.Status.OK) {

          var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

          // 결과값으로 받은 위치를 마커로 표시합니다
          var marker = new kakao.maps.Marker({
              map: map,
              position: coords
          });

          // 인포윈도우로 장소에 대한 설명을 표시합니다
          var infowindow = new kakao.maps.InfoWindow({
              content: '<div style="width:150px;text-align:center;padding:6px 0;">${b.bLocation}</div>'
          });
          infowindow.open(map, marker);

          // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
          map.setCenter(coords);
      } 
  });    
</script>
</body>
</html>